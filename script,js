// Career Data
const careersData = {
    programacion: {
        title: "ðŸ’» ProgramaciÃ³n",
        description: "Desarrolla aplicaciones web, mÃ³viles y de escritorio usando lenguajes modernos como Python, Java, JavaScript, C# y PHP. Domina frameworks como React, Angular, Django y Laravel. Aprende programaciÃ³n orientada a objetos, patrones de diseÃ±o, bases de datos SQL y NoSQL, desarrollo full-stack, metodologÃ­as Ã¡giles y control de versiones con Git.",
        skills: [
            "ProgramaciÃ³n en mÃºltiples lenguajes (Python, Java, C++, JavaScript)",
            "Desarrollo web frontend con HTML5, CSS3, React y Vue.js",
            "Backend con Node.js, Express, Django y Spring Boot",
            "DiseÃ±o y administraciÃ³n de bases de datos (MySQL, MongoDB, PostgreSQL)",
            "Desarrollo de aplicaciones mÃ³viles nativas e hÃ­bridas",
            "ProgramaciÃ³n de videojuegos con Unity y Unreal Engine",
            "DevOps, Docker, contenedores y cloud computing"
        ],
        projects: [
            "Sistema de punto de venta completo con facturaciÃ³n electrÃ³nica",
            "App mÃ³vil de delivery con geolocalizaciÃ³n en tiempo real",
            "Red social funcional con chat en tiempo real usando WebSockets",
            "E-commerce con carrito de compras, pagos en lÃ­nea y gestiÃ³n de inventario",
            "Sistema de reservaciones para hoteles y restaurantes",
            "Plataforma educativa tipo Classroom con videollamadas integradas",
            "API REST para aplicaciones empresariales con autenticaciÃ³n JWT",
            "Videojuego 2D/3D con fÃ­sica, colisiones y sistema de puntuaciÃ³n",
            "Bot de trading automÃ¡tico con anÃ¡lisis de mercado",
            "Sistema de control escolar con reportes y estadÃ­sticas"
        ],
        field: "Desarrollador web, programador mÃ³vil, ingeniero de software, analista de sistemas, desarrollador full-stack, game developer."
    },
    mecanica: {
        title: "âš™ï¸ MecÃ¡nica Industrial",
        description: "Domina el mantenimiento de maquinaria industrial, sistemas de transmisiÃ³n de potencia, manufactura avanzada y procesos de producciÃ³n. EspecialÃ­zate en mecanizado CNC, soldadura especializada, diseÃ±o mecÃ¡nico asistido por computadora (CAD/CAM), control de calidad, metalurgia, neumÃ¡tica e hidrÃ¡ulica industrial para la industria 4.0.",
        skills: [
            "OperaciÃ³n de torno, fresadora, taladro y mÃ¡quinas CNC",
            "Soldadura SMAW, GMAW (MIG), GTAW (TIG) y oxiacetileno",
            "DiseÃ±o mecÃ¡nico en AutoCAD, SolidWorks e Inventor",
            "Mantenimiento preventivo, predictivo y correctivo",
            "Lectura e interpretaciÃ³n de planos tÃ©cnicos",
            "Sistemas neumÃ¡ticos e hidrÃ¡ulicos industriales",
            "MetrologÃ­a y control de calidad dimensional",
            "Tratamientos tÃ©rmicos y propiedades de materiales"
        ],
        projects: [
            "FabricaciÃ³n de piezas mecÃ¡nicas en torno y fresadora manual",
            "Mecanizado CNC con programaciÃ³n G-code y M-code",
            "Soldadura de estructuras metÃ¡licas y tuberÃ­as industriales",
            "DiseÃ±o y manufactura de moldes y troqueles",
            "Banco de pruebas de motores y sistemas de transmisiÃ³n",
            "Montaje y alineaciÃ³n de maquinaria pesada",
            "Circuitos neumÃ¡ticos e hidrÃ¡ulicos automatizados",
            "Plan de mantenimiento para planta industrial",
            "AnÃ¡lisis de fallas mecÃ¡nicas con microscopÃ­a",
            "OptimizaciÃ³n de procesos de manufactura"
        ],
        field: "TÃ©cnico en mantenimiento industrial, operador CNC, soldador certificado, supervisor de producciÃ³n, diseÃ±ador mecÃ¡nico, inspector de calidad."
    },
    alimentos: {
        title: "ðŸ½ï¸ Alimentos y Bebidas",
        description: "Aprende procesamiento industrial de alimentos, conservaciÃ³n, control de calidad sanitaria e inocuidad alimentaria con estÃ¡ndares internacionales. Desarrolla habilidades en anÃ¡lisis fisicoquÃ­micos y microbiolÃ³gicos, desarrollo de nuevos productos, manejo de sistemas HACCP, certificaciones TIF, ISO 22000, buenas prÃ¡cticas de manufactura y normativas sanitarias mexicanas (NOM).",
        skills: [
            "AnÃ¡lisis fisicoquÃ­micos (pH, acidez, humedad, proteÃ­nas, grasas)",
            "AnÃ¡lisis microbiolÃ³gicos (bacterias, hongos, levaduras)",
            "Procesamiento tÃ©rmico (pasteurizaciÃ³n, esterilizaciÃ³n, ultrapasteurizaciÃ³n)",
            "TecnologÃ­as de conservaciÃ³n (congelaciÃ³n, deshidrataciÃ³n, liofilizaciÃ³n)",
            "FormulaciÃ³n y desarrollo de productos alimenticios",
            "Sistemas de gestiÃ³n de calidad e inocuidad (HACCP, ISO)",
            "Control de procesos en la industria alimentaria",
            "Normatividad sanitaria mexicana e internacional"
        ],
        projects: [
            "ElaboraciÃ³n de yogurt, quesos frescos y madurados",
            "ProducciÃ³n de helados artesanales y postres lÃ¡cteos",
            "FabricaciÃ³n de embutidos (salchicha, chorizo, jamÃ³n)",
            "Conservas de frutas (mermeladas, jaleas, frutas en almÃ­bar)",
            "Procesamiento de vegetales (encurtidos, salsas, aderezos)",
            "ElaboraciÃ³n de productos de panaderÃ­a y reposterÃ­a",
            "Bebidas fermentadas y no alcohÃ³licas",
            "AnÃ¡lisis de vida Ãºtil de productos alimenticios",
            "ImplementaciÃ³n de sistema HACCP en planta piloto",
            "Desarrollo de producto innovador desde cero"
        ],
        field: "TÃ©cnico en control de calidad, analista de laboratorio, supervisor de producciÃ³n alimentaria, inspector sanitario, desarrollador de productos."
    },
    soporte: {
        title: "ðŸ–¥ï¸ Soporte y Mantenimiento",
        description: "EspecialÃ­zate en mantenimiento preventivo y correctivo de equipos de cÃ³mputo, infraestructura de redes empresariales y sistemas operativos modernos. Domina diagnÃ³stico avanzado de hardware, configuraciÃ³n de servidores Windows Server y Linux, virtualizaciÃ³n con VMware y VirtualBox, ciberseguridad, backup, recovery, administraciÃ³n de Active Directory y soluciones en la nube.",
        skills: [
            "Ensamble, configuraciÃ³n y optimizaciÃ³n de computadoras",
            "DiagnÃ³stico y reparaciÃ³n de hardware (motherboards, RAM, HDD, SSD)",
            "InstalaciÃ³n y configuraciÃ³n de Windows, Linux y macOS",
            "DiseÃ±o e implementaciÃ³n de redes LAN y WAN",
            "Cableado estructurado categorÃ­a 6 y fibra Ã³ptica",
            "ConfiguraciÃ³n de routers, switches y firewalls",
            "AdministraciÃ³n de servidores y virtualizaciÃ³n",
            "Seguridad informÃ¡tica y protecciÃ³n antivirus"
        ],
        projects: [
            "Ensamble de PCs gaming y estaciones de trabajo profesionales",
            "InstalaciÃ³n de red empresarial con 50+ equipos",
            "ConfiguraciÃ³n de servidor Windows con Active Directory",
            "Montaje de servidor web LAMP (Linux, Apache, MySQL, PHP)",
            "ImplementaciÃ³n de sistema de respaldos automÃ¡ticos",
            "ConfiguraciÃ³n de VPN para trabajo remoto seguro",
            "InstalaciÃ³n de cÃ¡maras de seguridad IP en red",
            "MigraciÃ³n de datos entre sistemas operativos",
            "AuditorÃ­a de seguridad y hardening de sistemas",
            "Soporte tÃ©cnico remoto con TeamViewer y AnyDesk"
        ],
        field: "TÃ©cnico en soporte IT, administrador de redes, especialista en help desk, ingeniero de infraestructura, tÃ©cnico de campo, consultor tecnolÃ³gico."
    },
    contabilidad: {
        title: "ðŸ’¼ Contabilidad",
        description: "Domina el registro contable, procesos fiscales, gestiÃ³n financiera y auditorÃ­a de empresas comerciales, industriales y de servicios. ConviÃ©rtete en un profesional capaz de manejar las finanzas de cualquier organizaciÃ³n, elaborar estados financieros, calcular impuestos federales y estatales, realizar auditorÃ­as internas, utilizar software contable especializado (CONTPAQi, Aspel, SAP) y aplicar las Normas de InformaciÃ³n Financiera (NIF).",
        skills: [
            "Registro de operaciones contables con partida doble",
            "ElaboraciÃ³n de estados financieros (Balance, Estado de Resultados, Flujo de Efectivo)",
            "CÃ¡lculo de impuestos (ISR, IVA, IMSS, Infonavit, nÃ³minas)",
            "Contabilidad electrÃ³nica y facturaciÃ³n digital (CFDI 4.0)",
            "AuditorÃ­a interna y externa de procesos contables",
            "AnÃ¡lisis financiero e indicadores de rentabilidad",
            "Costos de producciÃ³n y punto de equilibrio",
            "Presupuestos empresariales y proyecciones financieras"
        ],
        projects: [
            "Estados financieros completos de empresa comercial e industrial",
            "Declaraciones mensuales y anuales ante SAT",
            "CÃ¡lculo de nÃ³minas con prestaciones de ley y PTU",
            "Sistema de costeo para empresa manufacturera",
            "AuditorÃ­a interna de registros contables",
            "AnÃ¡lisis financiero con razones de liquidez y rentabilidad",
            "Plan de negocios con proyecciÃ³n financiera 5 aÃ±os",
            "Conciliaciones bancarias y control de efectivo",
            "Presupuesto maestro (ventas, producciÃ³n, compras)",
            "ImplementaciÃ³n de software contable empresarial"
        ],
        field: "Contador general, auxiliar contable, analista financiero, auditor interno, consultor fiscal, asesor de nÃ³minas, controller financiero."
    },
    hospedaje: {
        title: "ðŸ¨ Hospedaje",
        description: "PrepÃ¡rate en administraciÃ³n hotelera de lujo, gestiÃ³n de servicios turÃ­sticos de alta calidad, atenciÃ³n al cliente premium y operaciÃ³n de establecimientos de hospedaje. Desarrolla habilidades en operaciÃ³n de hoteles, resorts, moteles, hostales, gestiÃ³n de ingresos (revenue management), sistemas de reservaciones (PMS), marketing turÃ­stico, organizaciÃ³n de eventos MICE, estÃ¡ndares AAA y Five Diamond, asÃ­ como certificaciones de calidad internacional.",
        skills: [
            "OperaciÃ³n de recepciÃ³n y sistemas PMS (Opera, Cloudbeds)",
            "TÃ©cnicas de housekeeping y limpieza profesional",
            "Servicio al cliente de excelencia y manejo de quejas",
            "Revenue management y estrategias de precios",
            "OrganizaciÃ³n de eventos corporativos y sociales",
            "AdministraciÃ³n de alimentos y bebidas en hoteles",
            "InglÃ©s turÃ­stico y atenciÃ³n a huÃ©spedes internacionales",
            "Normatividad turÃ­stica y estÃ¡ndares de calidad"
        ],
        projects: [
            "GestiÃ³n completa de reservaciones y check-in/out express",
            "Plan de limpieza y control de calidad de habitaciones",
            "OrganizaciÃ³n de boda completa (200+ invitados)",
            "Evento corporativo con coffee break y servicios",
            "AtenciÃ³n de huÃ©spedes VIP y servicios de concierge",
            "Estrategia de marketing digital para hotel",
            "AuditorÃ­a nocturna y cierre de caja de recepciÃ³n",
            "Manual de procedimientos operativos de hotel",
            "MenÃº de room service y carta de restaurante",
            "Plan de negocios para hostal boutique"
        ],
        field: "Recepcionista de hotel, supervisor de housekeeping, coordinador de eventos, gerente de operaciones, revenue manager, concierge, wedding planner."
    },
    robotica: {
        title: "ðŸ¤– RobÃ³tica",
        description: "DiseÃ±a, programa, construye y mantiene sistemas robÃ³ticos inteligentes y de automatizaciÃ³n industrial avanzada para la Industria 4.0. Domina mecatrÃ³nica, electrÃ³nica de potencia, programaciÃ³n de microcontroladores (Arduino, Raspberry Pi, ESP32), sensores y actuadores, visiÃ³n artificial, control automÃ¡tico, robÃ³tica mÃ³vil, brazos manipuladores, PLCs Siemens y Allen-Bradley, Internet de las Cosas (IoT) y manufactura inteligente.",
        skills: [
            "ProgramaciÃ³n de microcontroladores (Arduino, PIC, ESP32)",
            "DiseÃ±o de circuitos electrÃ³nicos y PCBs",
            "Control de motores DC, servos, motores a pasos y BLDC",
            "ProgramaciÃ³n de PLCs y sistemas SCADA",
            "VisiÃ³n artificial con OpenCV y procesamiento de imÃ¡genes",
            "RobÃ³tica mÃ³vil con navegaciÃ³n autÃ³noma (SLAM)",
            "DiseÃ±o 3D y manufactura aditiva (impresiÃ³n 3D)",
            "Internet de las Cosas (IoT) y comunicaciÃ³n M2M"
        ],
        projects: [
            "Robot seguidor de lÃ­nea con sensores infrarrojos",
            "Brazo robÃ³tico de 6 grados de libertad controlado por joystick",
            "Drone cuadricÃ³ptero con estabilizaciÃ³n automÃ¡tica",
            "Robot mÃ³vil con navegaciÃ³n autÃ³noma y evasiÃ³n de obstÃ¡culos",
            "Sistema de visiÃ³n artificial para clasificaciÃ³n de objetos",
            "LÃ­nea de ensamble automatizada con bandas transportadoras",
            "Robot aspiradora inteligente con mapeo de entorno",
            "Invernadero automatizado con sensores IoT",
            "VehÃ­culo autÃ³nomo con control remoto por WiFi",
            "Brazo robÃ³tico industrial para pick and place"
        ],
        field: "TÃ©cnico en robÃ³tica, programador de PLCs, ingeniero de automatizaciÃ³n, tÃ©cnico en mantenimiento de robots, desarrollador IoT, especialista en Industria 4.0."
    },
    ia: {
        title: "ðŸ§  Inteligencia Artificial",
        description: "Domina machine learning, deep learning, anÃ¡lisis de datos masivos (Big Data), redes neuronales artificiales y desarrollo de soluciones inteligentes innovadoras. Aprende Python avanzado, TensorFlow, PyTorch, scikit-learn, procesamiento de lenguaje natural (NLP), visiÃ³n por computadora, algoritmos genÃ©ticos, minerÃ­a de datos, ciencia de datos, IA generativa y tÃ©cnicas avanzadas de IA para resolver problemas complejos del mundo real.",
        skills: [
            "ProgramaciÃ³n avanzada en Python y librerÃ­as cientÃ­ficas",
            "Algoritmos de machine learning (supervisado, no supervisado, refuerzo)",
            "Redes neuronales profundas (CNN, RNN, LSTM, Transformers)",
            "Procesamiento de lenguaje natural (NLP) y chatbots",
            "VisiÃ³n por computadora y reconocimiento de imÃ¡genes",
            "AnÃ¡lisis de datos con Pandas, NumPy y visualizaciÃ³n",
            "Despliegue de modelos en producciÃ³n (MLOps)",
            "IA generativa (GPT, DALL-E, Stable Diffusion)"
        ],
        projects: [
            "Modelo de reconocimiento facial con CNN y OpenCV",
            "Chatbot conversacional con GPT y procesamiento NLP",
            "Sistema de recomendaciÃ³n tipo Netflix con filtrado colaborativo",
            "Detector de fraudes bancarios con machine learning",
            "Clasificador de imÃ¡genes mÃ©dicas para diagnÃ³stico",
            "AnÃ¡lisis de sentimientos en redes sociales con Twitter API",
            "PredicciÃ³n de precios de acciones con LSTM",
            "Asistente virtual por voz con reconocimiento de habla",
            "Generador de arte con IA (Stable Diffusion)",
            "Sistema de visiÃ³n para vehÃ­culos autÃ³nomos"
        ],
        field: "Data scientist, ingeniero de machine learning, analista de IA, desarrollador de chatbots, especialista en NLP, cientÃ­fico de datos, ingeniero MLOps."
    }
};

// Test Vocacional
let selectedInterests = new Set();

document.addEventListener('DOMContentLoaded', function() {
    const testCards = document.querySelectorAll('.test-card');
    
    testCards.forEach(card => {
        card.addEventListener('click', function() {
            this.classList.toggle('selected');
            updateRecommendations();
        });
    });
});

function updateRecommendations() {
    const selectedCards = document.querySelectorAll('.test-card.selected');
    const allSkills = new Set();
    
    selectedCards.forEach(card => {
        const skills = card.dataset.skills.split(',');
        skills.forEach(skill => allSkills.add(skill));
    });
    
    if (allSkills.size === 0) {
        document.getElementById('testResults').style.display = 'none';
        return;
    }
    
    const careerMapping = {
        'programacion': 'ProgramaciÃ³n',
        'mecanica': 'MecÃ¡nica Industrial',
        'alimentos': 'Alimentos y Bebidas',
        'soporte': 'Soporte y Mantenimiento',
        'contabilidad': 'Contabilidad',
        'hospedaje': 'Hospedaje',
        'robotica': 'RobÃ³tica',
        'ia': 'Inteligencia Artificial'
    };
    
    const recommendations = Array.from(allSkills).map(skill => careerMapping[skill]);
    
    const resultsDiv = document.getElementById('testResults');
    const careersDiv = document.getElementById('recommendedCareers');
    
    careersDiv.innerHTML = recommendations.map(career => 
        `<div style="background: var(--primary-red); color: white; padding: 1rem; margin: 0.5rem; border-radius: 8px; display: inline-block; font-weight: bold;">
            ${career}
        </div>`
    ).join('');
    
    resultsDiv.style.display = 'block';
    resultsDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
}

// Career Modal Functions
function openCareerModal(careerKey) {
    const career = careersData[careerKey];
    const modal = document.getElementById('careerModal');
    const content = document.getElementById('careerModalContent');
    
    content.innerHTML = `
        <div class="career-header">
            <h2>${career.title}</h2>
        </div>
        
        <div class="career-description">
            <p>${career.description}</p>
        </div>
        
        <div class="career-section">
            <h3>ðŸŽ¯ Competencias que desarrollarÃ¡s:</h3>
            <ul>
                ${career.skills.map(skill => `<li>${skill}</li>`).join('')}
            </ul>
        </div>
        
        <div class="career-section">
            <h3>ðŸš€ Proyectos que realizarÃ¡s:</h3>
            <ul>
                ${career.projects.map(project => `<li>${project}</li>`).join('')}
            </ul>
        </div>
        
        <div class="career-field">
            <strong>ðŸ’¼ Campo laboral:</strong>
            <p>${career.field}</p>
        </div>
    `;
    
    modal.classList.add('active');
}

function closeCareerModal() {
    document.getElementById('careerModal').classList.remove('active');
}

// Login Modal Functions
function openLoginModal() {
    document.getElementById('loginModal').classList.add('active');
}

function closeLoginModal() {
    document.getElementById('loginModal').classList.remove('active');
    document.getElementById('loginForm').reset();
    hideErrors();
}

function hideErrors() {
    document.getElementById('controlError').style.display = 'none';
    document.getElementById('emailError').style.display = 'none';
}

// Form Validation
function handleLogin(event) {
    event.preventDefault();
    hideErrors();

    const controlNumber = document.getElementById('controlNumber').value;
    const email = document.getElementById('email').value;

    let isValid = true;

    // Validate control number (8 digits)
    const controlPattern = /^\d{8}$/;
    if (!controlPattern.test(controlNumber)) {
        document.getElementById('controlError').style.display = 'block';
        isValid = false;
    }

    // Validate email domain
    const emailPattern = /^[a-zA-Z0-9._-]+@cbtis258\.edu\.mx$/;
    if (!emailPattern.test(email)) {
        document.getElementById('emailError').style.display = 'block';
        isValid = false;
    }

    if (isValid) {
        alert('Â¡Inicio de sesiÃ³n exitoso!\n\n' +
              'NÃºmero de Control: ' + controlNumber + '\n' +
              'Correo: ' + email + '\n\n' +
              'Bienvenido al Portal Estudiantil CBTis 258');
        closeLoginModal();
    }
}

// Close modal on outside click
document.addEventListener('click', function(event) {
    if (event.target.id === 'careerModal') {
        closeCareerModal();
    }
    if (event.target.id === 'loginModal') {
        closeLoginModal();
    }
});

// Close modal with Escape key
document.addEventListener('keydown', function(event) {
    if (event.key === 'Escape') {
        closeCareerModal();
        closeLoginModal();
    }
});

// Smooth scrolling for navigation links
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function(e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
            target.scrollIntoView({ 
                behavior: 'smooth', 
                block: 'start' 
            });
        }
    });
});

// Real-time validation feedback
document.addEventListener('DOMContentLoaded', function() {
    const controlInput = document.getElementById('controlNumber');
    const emailInput = document.getElementById('email');
    
    if (controlInput) {
        controlInput.addEventListener('input', function(e) {
            const value = e.target.value;
            const errorElement = document.getElementById('controlError');
            
            if (value.length > 0 && !/^\d{8}$/.test(value)) {
                errorElement.style.display = 'block';
                e.target.style.borderColor = '#D32F2F';
            } else {
                errorElement.style.display = 'none';
                e.target.style.borderColor = '#DDD';
            }
        });
    }
    
    if (emailInput) {
        emailInput.addEventListener('input', function(e) {
            const value = e.target.value;
            const errorElement = document.getElementById('emailError');
            const emailPattern = /^[a-zA-Z0-9._-]+@cbtis258\.edu\.mx$/;
            
            if (value.length > 0 && !emailPattern.test(value)) {
                errorElement.style.display = 'block';
                e.target.style.borderColor = '#D32F2F';
            } else {
                errorElement.style.display = 'none';
                e.target.style.borderColor = '#DDD';
            }
        });
    }
});
